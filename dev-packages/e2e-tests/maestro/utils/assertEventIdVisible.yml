appId: ${APP_ID}
---
- extendedWaitUntil:
    visible:
      id: 'eventId'
    timeout: 60_000 # 60 seconds

- copyTextFrom:
    id: 'eventId'
- assertTrue: ${maestro.copiedText}

- runScript:
    file: sentryApi.js
    env:
      fetch: event
      id: ${maestro.copiedText}
      sentryAuthToken: ${SENTRY_AUTH_TOKEN}

- assertTrue: ${output.event_id == maestro.copiedText}
